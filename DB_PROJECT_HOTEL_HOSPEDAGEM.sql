CREATE DATABASE RESERVA_HOTEL;

USE RESERVA_HOTEL;

CREATE TABLE NACIONALIDADE (
SIGLA VARCHAR(2) PRIMARY KEY,
NOME VARCHAR(50));

CREATE TABLE TEM (
SIGLA VARCHAR(2),
COD_CLIENTE INT,
FOREIGN KEY (SIGLA) REFERENCES NACIONALIDADE (SIGLA));

CREATE TABLE CLIENTE (
COD_CLIENTE INT PRIMARY KEY,
NOME_CLIENTE VARCHAR(50),
TELEFONE VARCHAR(11),
SEXO VARCHAR(1),
CPF VARCHAR(11),
PASSAPORTE VARCHAR(8),
DOCUMENTO VARCHAR(7));

ALTER TABLE TEM 
ADD FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTE (COD_CLIENTE);

CREATE TABLE RESERVA (
NUM_RES VARCHAR(6),
NUM_CARTAO VARCHAR(16),
QTD_DIA INT,
DATA_RESERVA DATE,
DATA_INI DATE,
_STATUS BIT(1),
COD_CLIENTE INT,
COD_TIPO_QUART VARCHAR(11),
COD_OPE VARCHAR (2));

ALTER TABLE RESERVA
ADD FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTE (COD_CLIENTE);

ALTER TABLE RESERVA
ADD PRIMARY KEY (NUM_RES);

CREATE TABLE OPERADORA (
COD_OPE VARCHAR(2) PRIMARY KEY,
NOME_OPE VARCHAR(60));

ALTER TABLE RESERVA
ADD FOREIGN KEY (COD_OPE) REFERENCES OPERADORA (COD_OPE);


CREATE TABLE TIPO_QUART (
COD_TIPO_QUART VARCHAR(11) PRIMARY KEY,
DESC_TIPO VARCHAR(50),
VAL_TIPO_QUART VARCHAR(50));

ALTER TABLE RESERVA
ADD FOREIGN KEY (COD_TIPO_QUART) REFERENCES TIPO_QUART (COD_TIPO_QUART);

CREATE TABLE QUARTO (
NUM_QUART INTEGER PRIMARY KEY,
ANDAR INT,
COD_TIPO_QUART VARCHAR(50));

ALTER TABLE QUARTO
ADD FOREIGN KEY (COD_TIPO_QUART) REFERENCES TIPO_QUART (COD_TIPO_QUART);


SELECT * FROM NACIONALIDADE;


INSERT INTO NACIONALIDADE(
SIGLA,
NOME) VALUES (
'US', 
'Lisa Minsi');

INSERT INTO NACIONALIDADE(
SIGLA,
NOME) VALUES (
'JP',
'Kamisato Ayaka');

UPDATE NACIONALIDADE 
SET NOME = 'Jap√£o' 
WHERE SIGLA = 'JP';

UPDATE NACIONALIDADE
SET NOME = 'Estados Unidos' 
WHERE SIGLA = 'US';


SELECT * FROM CLIENTE;


INSERT INTO CLIENTE (
COD_CLIENTE,
NOME_CLIENTE,
TELEFONE,
SEXO,
CPF,
PASSAPORTE,
DOCUMENTO) 
VALUES (
1597530,
 'Lisa Minsi',
 '81986569277',
 'F',
 '70738829994',
 'IH158887',
 '496290');

INSERT INTO CLIENTE (
COD_CLIENTE,
NOME_CLIENTE,
TELEFONE,
SEXO,
CPF,
PASSAPORTE,
DOCUMENTO) 
VALUES (2584560, 'Kamisato Ayaka', '96982007613', 'F', '88810198840', 'LS838824', '4723948');


SELECT * FROM OPERADORA;


INSERT INTO OPERADORA (
COD_OPE,
NOME_OPE) 
VALUES 
(01, 'Visa'),
(02, 'Mastercard');


SELECT * FROM TIPO_QUART;


INSERT INTO TIPO_QUART(
COD_TIPO_QUART,
DESC_TIPO,
VAL_TIPO_QUART) 
VALUES
(1, 'Quarto Solteiro', '650,00'),
(2, 'Quarto Casal', '260,00');


SELECT * FROM RESERVA;


INSERT INTO RESERVA (
NUM_RES,
NUM_CARTAO,
QTD_DIA,
DATA_RESERVA,
DATA_INI,
_STATUS,
COD_CLIENTE,
COD_TIPO_QUART,
COD_OPE) 
VALUES 
('172627', '5194067651094082', 5, '2023-10-29', '2023-11-06', 1, 1597530, 2, 1),
('732782', '5204632929526245', 2, '2023-11-04', '2023-12-31', 1, 2584560, 1, 2);


SELECT * FROM QUARTO;


INSERT INTO QUARTO (
NUM_QUART,
ANDAR,
COD_TIPO_QUART) 
VALUES 
(01, 01, 1),
(02, 01, 2);


SELECT * FROM TEM;


INSERT INTO TEM (
SIGLA,
COD_CLIENTE) 
VALUES
('JP', 2584560),
('US', 1597530);


SELECT * FROM CLIENTE;


INSERT INTO CLIENTE (
COD_CLIENTE,
NOME_CLIENTE,
TELEFONE, 
SEXO,
CPF,
PASSAPORTE,
DOCUMENTO) VALUES (
3698521,
'Kaedehara Kazuha',
53984236245,
'M',
20150579942,
'VH368451',
4825322);

DELETE FROM CLIENTE WHERE COD_CLIENTE = 3698521;	


SELECT * FROM CLIENTE;

SELECT * FROM RESERVA;

SELECT * FROM NACIONALIDADE;

SELECT * FROM TEM;

SELECT CLIENTE.COD_CLIENTE,
CLIENTE.NOME_CLIENTE AS NOME,
CLIENTE.CPF,
CLIENTE.SEXO,
NACIONALIDADE.SIGLA,
NACIONALIDADE.NOME
FROM CLIENTE
INNER JOIN TEM ON TEM.COD_CLIENTE = CLIENTE.COD_CLIENTE
INNER JOIN NACIONALIDADE ON NACIONALIDADE.SIGLA = TEM.SIGLA;



SELECT CLIENTE.COD_CLIENTE,
CLIENTE.NOME_CLIENTE AS NOME,
CLIENTE.TELEFONE,
CLIENTE.SEXO,
CLIENTE.CPF,
CLIENTE.PASSAPORTE,
CLIENTE.DOCUMENTO AS RG, 
RESERVA.NUM_RES AS NUMERO_DA_RESERVA,
RESERVA.NUM_CARTAO AS NUMERO_DO_CARTAO,
RESERVA.DATA_RESERVA AS DATA_QUE_RESERVOU,
RESERVA.DATA_INI AS DATA_INICIO,
RESERVA._STATUS AS PAGO,
RESERVA.COD_TIPO_QUART AS COD_TIPO_QUARTO,
RESERVA.COD_OPE AS CODIGO_OPERADORA
FROM CLIENTE
INNER JOIN RESERVA
ON CLIENTE.COD_CLIENTE = RESERVA.COD_CLIENTE;
